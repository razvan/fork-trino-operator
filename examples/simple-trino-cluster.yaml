apiVersion: trino.stackable.tech/v1alpha1
kind: TrinoCluster
metadata:
  name: simple-trino
spec:
  version: "0.0.362"
  nodeEnvironment: production
  hive:
    namespace: default
    name: simple-derby
  opa:
    namespace: default
    name: simple-opa
  tls:
    namespace: default
    name: trino-key-config
    storeType: JKS
  authentication:
    basic:
      - name: simple-trino-user-admin-secret
        namespace: default
      - name: simple-trino-user-alice-secret
        namespace: default
      - name: simple-trino-user-bob-secret
        namespace: default
  authorization:
    package: trino
    permissions:
      admin:
        schemas:
          read: true
          write: true
        tables:
          iris_parquet:
            read: true
            write: true
          iris_csv:
            read: true
            write: true
      bob:
        schemas:
          read: false
          write: false
        tables:
          iris_parquet:
            read: true
  s3:
    endPoint: changeme
    accessKey: changeme
    secretKey: changeme
    sslEnabled: false
    pathStyleAccess: true
  coordinators:
    roleGroups:
      default:
        selector:
          matchLabels:
            kubernetes.io/os: linux
        replicas: 1
        config:
          coordinator: true
          nodeDataDir: /stackable/trino/data
  workers:
    roleGroups:
      default:
        selector:
          matchLabels:
            kubernetes.io/os: linux
        replicas: 1
        config:
          nodeDataDir: /stackable/trino/data
